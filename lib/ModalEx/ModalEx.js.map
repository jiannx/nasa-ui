{"version":3,"sources":["../../components/ModalEx/ModalEx.jsx"],"names":["React","Component","Modal","confirm","message","ModalEx","props","show","title","state","isFirst","onInit","setState","onShow","visible","onOk","confirmLoading","onCancel","children","defaultProps","okText","cancelText","modalEx"],"mappings":";;;;;;;;AAAA;;;;;;;;;;;;;;;;;;;AAmBA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,KAAT,QAAsB,MAAtB;AACA,OAAOC,OAAP,MAAoB,eAApB;AACA,OAAO,cAAP;qBACoB,e;qBAAbC,O;;IAEcC,O;;;AAEnB,mBAAYC,KAAZ,EAAmB;AAAA;;AAAA,kHACXA,KADW;;AAAA,UA6BnBC,IA7BmB,GA6BZ,UAACC,KAAD,EAAW;AAChB,UAAI,MAAKC,KAAL,CAAWC,OAAX,KAAuB,IAA3B,EAAiC;AAC/B,cAAKJ,KAAL,CAAWK,MAAX,IAAqB,MAAKL,KAAL,CAAWK,MAAX,EAArB;AACA,cAAKC,QAAL,CAAc;AACZF,mBAAS;AADG,SAAd;AAGD;AACD,YAAKJ,KAAL,CAAWO,MAAX,IAAqB,MAAKP,KAAL,CAAWO,MAAX,EAArB;;AAEAL,cAAQA,SAAS,MAAKF,KAAL,CAAWE,KAA5B;AACA,YAAKI,QAAL,CAAc;AACZJ,oBADY;AAEZM,iBAAS;AAFG,OAAd;AAID,KA3CkB;;AAAA,UA6CnBC,IA7CmB,GA6CZ,YAAM;AACX;AACA;AACA;AACA,YAAKT,KAAL,CAAWS,IAAX,IAAmB,MAAKT,KAAL,CAAWS,IAAX,CAAgB,YAAM;AACvC,cAAKH,QAAL,CAAc;AACZE,mBAAS,KADG;AAEZE,0BAAgB;AAFJ,SAAd;AAID,OALkB,CAAnB;AAMD,KAvDkB;;AAAA,UAyDnBC,QAzDmB,GAyDR,YAAM;AACf,YAAKL,QAAL,CAAc;AACZE,iBAAS;AADG,OAAd;AAGA,YAAKR,KAAL,CAAWW,QAAX,IAAuB,MAAKX,KAAL,CAAWW,QAAX,EAAvB;AACD,KA9DkB;;AAEjB,UAAKR,KAAL,GAAa;AACXD,aAAOF,MAAME,KADF;AAEXM,eAAS,KAFE;AAGXE,sBAAgB,KAHL;AAIXN,eAAS;AAJE,KAAb;AAFiB;AAQlB;;;;wCAEmB;AAClB,UAAI,KAAKJ,KAAL,CAAWQ,OAAX,KAAuB,IAA3B,EAAiC;AAC/B,aAAKP,IAAL;AACD;AACF;;;6BAkDQ;AACP,aACE;AAAC,aAAD;AAAA,0BACM,KAAKD,KADX;AAEE,iBAAO,KAAKG,KAAL,CAAWD,KAFpB;AAGE,0BAAgB,KAAKC,KAAL,CAAWO,cAH7B;AAIE,mBAAS,KAAKP,KAAL,CAAWK,OAJtB;AAKE,gBAAM,KAAKC,IALb;AAME,oBAAU,KAAKE;AANjB;AAQG,aAAKX,KAAL,CAAWY;AARd,OADF;AAYD;;;;EA/EkCjB,S;;AAAhBI,O,CAkBZc,Y,GAAe;AACpBR,UAAQ,IADY,EACN;AACdE,UAAQ,IAFY,EAEN;;AAEd;AACAL,SAAO,EALa;AAMpBM,WAAS,KANW;AAOpBM,UAAQ,IAPY;AAQpBC,cAAY,IARQ;AASpBN,QAAM,gBAAM,CAAE,CATM;AAUpBE,YAAU,oBAAM,CAAE;AAVE,C;eAlBHZ,O;;;AAkFrBA,QAAQF,OAAR,GAAkBA,OAAlB;;AAEA,OAAO,IAAMmB,UAAU;AACrBnB;AADqB,CAAhB","file":"ModalEx.js","sourcesContent":["/**\r\n * 弹窗定制版 \r\n * 在antd的Modal上封装了弹出隐藏等基本逻辑\r\n * 参数参照antd Modal\r\n * Api:\r\n * ref.show(title)\r\n *      \r\n<ModalEx title=\"日志下载\" \r\n  ref={ modal => this.modalLog = modal} \r\n  onOk={(close) => { close(); }} \r\n  onInit={() => { console.log('init') }} \r\n  onShow={() => { console.log('show') }}\r\n>\r\n  children\r\n</ModalEx>\r\n<Button onClick={()=>{ this.modalLog.show('新标题') }}>下载日志</Button>\r\n<Button onClick={()=>{ this.modalLog.show() }}>下载日志</Button>\r\n */\r\n\r\nimport React, { Component } from 'react';\r\nimport { Modal } from 'antd';\r\nimport confirm from './confirm.jsx';\r\nimport './style.scss';\r\nexport message from './message.jsx';\r\n\r\nexport default class ModalEx extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      title: props.title,\r\n      visible: false,\r\n      confirmLoading: false,\r\n      isFirst: true,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.visible === true) {\r\n      this.show();\r\n    }\r\n  }\r\n\r\n  static defaultProps = {\r\n    onInit: null, // 第一次弹出时调用的函数\r\n    onShow: null, // 每次弹出调用的函数\r\n\r\n    // 以下参照 antd Modal\r\n    title: '',\r\n    visible: false,\r\n    okText: '确认',\r\n    cancelText: '取消',\r\n    onOk: () => {},\r\n    onCancel: () => {},\r\n  }\r\n\r\n  show = (title) => {\r\n    if (this.state.isFirst === true) {\r\n      this.props.onInit && this.props.onInit();\r\n      this.setState({\r\n        isFirst: false,\r\n      });\r\n    }\r\n    this.props.onShow && this.props.onShow();\r\n\r\n    title = title || this.props.title;\r\n    this.setState({\r\n      title,\r\n      visible: true,\r\n    });\r\n  }\r\n\r\n  onOk = () => {\r\n    // this.setState({\r\n    //   confirmLoading: true\r\n    // });\r\n    this.props.onOk && this.props.onOk(() => {\r\n      this.setState({\r\n        visible: false,\r\n        confirmLoading: false,\r\n      });\r\n    });\r\n  }\r\n\r\n  onCancel = () => {\r\n    this.setState({\r\n      visible: false,\r\n    });\r\n    this.props.onCancel && this.props.onCancel();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Modal\r\n        {...this.props}\r\n        title={this.state.title}\r\n        confirmLoading={this.state.confirmLoading}\r\n        visible={this.state.visible}\r\n        onOk={this.onOk}\r\n        onCancel={this.onCancel}\r\n      >\r\n        {this.props.children}\r\n      </Modal>\r\n    )\r\n  }\r\n}\r\n\r\nModalEx.confirm = confirm;\r\n\r\nexport const modalEx = {\r\n  confirm,\r\n}"]}