{"version":3,"sources":["../../components/DynamicView/DynamicView.jsx"],"names":["React","Component","Icon","Button","Row","Col","Select","Radio","Tooltip","Input","_","FormEx","defultItem","type","title","dataIndex","render","span","children","defaultValue","visiable","ViewString","value","ViewBoolen","ViewArray","props","ViewObject","ViewBr","OneOf","ViewNode","item","align","valueClassName","push","colProps","titleStyle","join","DynamicView","get","id","values","items","spanSum","forEach","Object","assign","isNumber","width","splice","length","className","size","paddingSide","rowProps","gutter","padding","style","Children","toArray","defaultProps"],"mappings":"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","file":"DynamicView.js","sourcesContent":["// 动态详情显示\r\n// 动态表单 完善\r\n// 上面两项组合\r\n/**\r\n<DynamicView\r\n  className=\"\"\r\n  style=\"\"\r\n  align: 'left', // 对齐方式 String or Number，默认值:left。left:左对齐；number：数值，则该值为标题所占的百分比宽度，并进行以冒号为中心对齐\r\n  values={this.state.values} // 完整数据 Object\r\n  rowProps={{gutter: 16}} // Row 的 props\r\n  colProps={{span: 8}} // Col 的props\r\n  item={[\r\n    { \r\n      type, // 字段类型 String = 'string'||'boolen'||'array'||'object'||'br'\r\n      title, // 标题 String 如果标题为空，则不显示标题\r\n      dataIndex, // 绑定字段的key String\r\n      render, // 处理函数 (value) => '显示的内容'\r\n      span, // Col的span参数\r\n      defaultValue: '', // 未获取到数据情况\r\n      children: []\r\n    }\r\n  ]}\r\n>\r\n**/\r\n\r\nimport React, { Component } from 'react';\r\nimport { Icon, Button, Row, Col, Select, Radio, Tooltip, Input } from 'antd';\r\nimport _ from 'lodash';\r\nimport { FormEx } from 'src/components';\r\nimport './style.scss';\r\n\r\n\r\nconst defultItem = {\r\n  type: 'string',\r\n  title: '',\r\n  dataIndex: '',\r\n  render: null,\r\n  span: null,\r\n  children: null,\r\n  defaultValue: '',\r\n  visiable: true, // 是否可见\r\n}\r\n\r\nfunction ViewString({ value }) {\r\n  return <span>{value}</span>;\r\n}\r\n\r\nfunction ViewBoolen({ value }) {\r\n  if (value === true)\r\n    return <span>是</span>;\r\n  if (value === false)\r\n    return <span>否</span>;\r\n  return null;\r\n}\r\n\r\nfunction ViewArray(props) {\r\n\r\n}\r\n\r\nfunction ViewObject(props) {\r\n\r\n}\r\n\r\nfunction ViewBr(props) {\r\n  return <div className=\"clear\"></div>\r\n}\r\n\r\nfunction OneOf(props) {\r\n\r\n}\r\n\r\nfunction ViewNode({ item, align }) {\r\n  if (item.type === 'br') {\r\n    return <ViewBr/>\r\n  }\r\n  // 在标题不存在的情况下，添加值偏移样式，使其与上一行标签对齐\r\n  let valueClassName = ['dynamic-view-value'];\r\n  if (!item.title) {\r\n    valueClassName.push('dynamic-view-value-offset');\r\n  }\r\n  if (item.title) {\r\n    item.title += ': '\r\n  }\r\n  return (\r\n    <Col className=\"dynamic-view-col\" {...item.colProps}>\r\n      <span className=\"dynamic-view-title\" style={item.titleStyle}>\r\n        {item.title}\r\n      </span>\r\n      <span className={valueClassName.join(' ')}>\r\n        { item.type === 'string' && \r\n          <ViewString {...item} />\r\n        }\r\n        { item.type === 'boolen' && \r\n          <ViewBoolen {...item} />\r\n        }\r\n      </span>\r\n    </Col>\r\n  )\r\n}\r\n\r\nexport default class DynamicView extends Component {\r\n  static defaultProps = {\r\n    className: '',\r\n    style: null,\r\n    align: 'left',\r\n    values: {},\r\n    items: [],\r\n    rowProps: {},\r\n    colProps: {\r\n      span: 8\r\n    },\r\n    item: [],\r\n  }\r\n\r\n  get = (id, defaultValue) => {\r\n    return _.get(this.props.values, id, defaultValue);\r\n  }\r\n\r\n  render() {\r\n    let items = [];\r\n    let spanSum = 0;\r\n\r\n    this.props.items.forEach(item => {\r\n      item = Object.assign({}, defultItem, item);\r\n      if (item.visiable === false) {\r\n        return;\r\n      }\r\n      let value = this.get(item.dataIndex, item.defaultValue);\r\n      let props = {\r\n        ...item,\r\n        colProps: item.span ? Object.assign({}, this.props.colProps, { span: item.span }) : this.props.colProps,\r\n        value: item.render ? item.render(value) : value,\r\n        titleStyle: _.isNumber(this.props.align) ? { width: this.props.align * 100 + '%' } : null\r\n      }\r\n      if (item.type === 'br') {\r\n        items.push(<ViewBr/>);\r\n        spanSum = 0;\r\n        return;\r\n      }\r\n      items.push(<ViewNode item={props} align={this.props.align}/>);\r\n\r\n      // 加上当前节点超出一行，在当前节点之前插入换行使其对齐\r\n      spanSum += props.colProps.span;\r\n      if (spanSum > 24) {\r\n        items.splice(items.length - 1, 0, <ViewBr />);\r\n        spanSum = props.colProps.span;\r\n      }\r\n    });\r\n\r\n    // 添加冒号对齐样式\r\n    const className = ['nasa-dynamic-view', this.props.className];\r\n    if (_.isNumber(this.props.align)) {\r\n      className.push('nasa-dynamic-view-align-colon');\r\n    }\r\n    if (this.props.size === 'samll') {\r\n      className.push('nasa-dynamic-view-small');\r\n    }\r\n\r\n    let paddingSide = 0;\r\n    // 移除row的margin负值\r\n    if (this.props.rowProps && this.props.rowProps.gutter) {\r\n      paddingSide = this.props.rowProps.gutter / 2;\r\n    }\r\n\r\n    return (\r\n      <div style={{padding: `0 ${paddingSide}px`}}>\r\n        <Row {...this.props.rowProps} style={this.props.style} className={className.join(' ')}>\r\n          {React.Children.toArray(items)}\r\n        </Row>\r\n      </div>\r\n    )\r\n  }\r\n}"]}