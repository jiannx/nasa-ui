{"version":3,"sources":["../../components/CopyTextToClipboard/index.jsx"],"names":["React","Component","Icon","message","PropTypes","classNames","defaultSuccessCallback","success","copyTextToClipboard","text","successCallback","failCallback","textArea","document","createElement","style","width","height","value","body","appendChild","select","execCommand","err","removeChild","CopyTextToClipboard","onCopy","props","children","className","title","defaultProps","propTypes","string","isRequired","func"],"mappings":";;;;;;;;AAAA;;;AAGA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,EAAeC,OAAf,QAA8B,MAA9B;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAO,cAAP;;AAEA,IAAMC,yBAAyB,SAAzBA,sBAAyB,GAAM;AACnCH,UAAQI,OAAR,CAAgB,MAAhB;AACD,CAFD;;AAIA,SAASC,mBAAT,CAA6BC,IAA7B,EAA2F;AAAA,MAAxDC,eAAwD,uEAAtCJ,sBAAsC;AAAA,MAAdK,YAAc;;AACzF,MAAIC,WAAWC,SAASC,aAAT,CAAuB,UAAvB,CAAf;AACAF,WAASG,KAAT,CAAeC,KAAf,GAAuB,GAAvB;AACAJ,WAASG,KAAT,CAAeE,MAAf,GAAwB,GAAxB;AACAL,WAASM,KAAT,GAAiBT,IAAjB;AACAI,WAASM,IAAT,CAAcC,WAAd,CAA0BR,QAA1B;AACAA,WAASS,MAAT;AACA,MAAI;AACF,QAAIR,SAASS,WAAT,CAAqB,MAArB,CAAJ,EACEZ,mBAAmBA,iBAAnB,CADF,KAGEC,gBAAgBA,cAAhB;AACH,GALD,CAKE,OAAOY,GAAP,EAAY;AACZZ,oBAAgBA,cAAhB;AACD;AACDE,WAASM,IAAT,CAAcK,WAAd,CAA0BZ,QAA1B;AACD;;IAEoBa,mB;;;;;;;;;;;;;;gNAQnBC,M,GAAS,YAAM;AACblB,0BAAoB,MAAKmB,KAAL,CAAWlB,IAA/B,EAAqC,MAAKkB,KAAL,CAAWjB,eAAhD,EAAiE,MAAKiB,KAAL,CAAWhB,YAA5E;AACD,K;;;;;6BAEQ;AACP,aACE,KAAKgB,KAAL,CAAWC,QAAX,GACA;AAAA;AAAA,UAAM,WAAWvB,WAAW,gBAAX,EAA6B,KAAKsB,KAAL,CAAWE,SAAxC,CAAjB,EAAqE,SAAS,KAAKH,MAAnF;AACD,aAAKC,KAAL,CAAWC;AADV,OADA,GAIA;AAAA;AAAA,UAAG,WAAWvB,WAAW,gBAAX,EAA6B,KAAKsB,KAAL,CAAWE,SAAxC,CAAd,EAAkE,OAAO,KAAKF,KAAL,CAAWG,KAApF,EAA2F,SAAS,KAAKJ,MAAzG;AACA,4BAAC,IAAD,IAAM,MAAK,MAAX;AADA,OALF;AASD;;;;EAtB8CzB,S;;AAA5BwB,mB,CACZM,Y,GAAe;AACpBtB,QAAM,EADc,EACV;AACVC,mBAAiB,IAFG,EAEG;AACvBC,gBAAc,IAHM,EAGA;AACpBmB,SAAO,QAJa,CAIH;AAJG,C;eADHL,mB;;;AAyBrBA,oBAAoBO,SAApB,GAAgC;AAC9BvB,QAAML,UAAU6B,MAAV,CAAiBC,UADO;AAE9BxB,mBAAiBN,UAAU+B,IAFG;AAG9BxB,gBAAcP,UAAU+B,IAHM;AAI9BL,SAAO1B,UAAU6B;AAJa,CAAhC","file":"index.js","sourcesContent":["/**\r\n * 拷贝内容到剪切板\r\n */\r\nimport React, { Component } from 'react';\r\nimport { Icon, message } from 'antd';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport './style.scss';\r\n\r\nconst defaultSuccessCallback = () => {\r\n  message.success('复制成功');\r\n}\r\n\r\nfunction copyTextToClipboard(text, successCallback = defaultSuccessCallback, failCallback) {\r\n  let textArea = document.createElement(\"textarea\")\r\n  textArea.style.width = '0';\r\n  textArea.style.height = '0';\r\n  textArea.value = text;\r\n  document.body.appendChild(textArea);\r\n  textArea.select();\r\n  try {\r\n    if (document.execCommand('copy'))\r\n      successCallback && successCallback();\r\n    else\r\n      failCallback && failCallback();\r\n  } catch (err) {\r\n    failCallback && failCallback();\r\n  }\r\n  document.body.removeChild(textArea)\r\n}\r\n\r\nexport default class CopyTextToClipboard extends Component {\r\n  static defaultProps = {\r\n    text: '', // 需要复制的内容\r\n    successCallback: null, // 复制成功回调\r\n    failCallback: null, // 复制失败回调\r\n    title: '点击复制信息', // 鼠标hover文本\r\n  }\r\n\r\n  onCopy = () => {\r\n    copyTextToClipboard(this.props.text, this.props.successCallback, this.props.failCallback);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      this.props.children ?\r\n      <span className={classNames('nasa-copy-text', this.props.className)} onClick={this.onCopy}>\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</span> :\r\n      <a className={classNames('nasa-copy-text', this.props.className)} title={this.props.title} onClick={this.onCopy}>\r\n\t    \t<Icon type=\"copy\" />\r\n\t    </a>\r\n    )\r\n  }\r\n}\r\n\r\nCopyTextToClipboard.propTypes = {\r\n  text: PropTypes.string.isRequired,\r\n  successCallback: PropTypes.func,\r\n  failCallback: PropTypes.func,\r\n  title: PropTypes.string,\r\n};"]}