{"version":3,"sources":["../../components/FormEx2/DynamicFormEx2.jsx"],"names":["React","Component","_","FormEx","Button","Row","Col","Modal","Input","Radio","Select","Checkbox","Icon","FormEx2","FormItem","Item","RadioGroup","Group","Option","CheckboxGroup","defaultItem","type","label","bind","children","disabled","required","rules","undefined","defaultValue","keyLabel","valueLabel","options","span","addText","tokenSeparators","layout","labelCol","xs","sm","wrapperCol","DynamicFormEx2","props","state","values","cloneDeep","defaultValues","nextProps","items","renderChildren","className","console","log","setState","onChange","form","defaultProps","title","onSubmit","gutter","onArrayAdd","dataIndex","listData","get","push","setValue","onArrayDel","index","splice","onSetObjectData","listDataIndex","data","forEach","x","key","value","delProperty","id","ids","split","length","join","onOneOfChange","selLabel","setTimeout","set","opt","child","renderDecorator","self","decorator","isFunction","placeholder","map","spanLength","Math","floor","d","i","paddingBottom","Object","keys","debounce","renderItem","item","assign","withDataIndex","cloneElement","currentSel","optChild","concat","Children","toArray"],"mappings":"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","file":"DynamicFormEx2.js","sourcesContent":["/**\r\n * 动态表单及显示 待完善\r\n */\r\nimport React, { Component } from 'react';\r\nimport _ from 'lodash';\r\nimport { FormEx } from 'src/components';\r\nimport { Button, Row, Col, Modal, Input, Radio, Select, Checkbox, Icon } from 'antd';\r\nimport FormEx2 from './FormEx2.jsx';\r\n\r\nconst FormItem = FormEx2.Item;\r\nconst RadioGroup = Radio.Group;\r\nconst Option = Select.Option;\r\nconst CheckboxGroup = Checkbox.Group;\r\n\r\nconst defaultItem = {\r\n  type: 'input', //string, input||radio||checkbox||select||oneOf 多项只能配置一项||array列表项||br换行||selectTag多重输入\r\n  label: '', // 标题文本\r\n  bind: null, // 显示及编辑时对应数据中的索引\r\n  children: null, // array, array 中子节点\r\n  disabled: false, // 当前项是否可编辑\r\n  required: false, // 编辑时是否必填\r\n  rules: undefined, // 编辑时校验规则\r\n  defaultValue: undefined, // 默认值\r\n\r\n  // Object 两个文本框实现键值对形式 根据输入的值，生成对象 {key: value}\r\n  keyLabel: 'key', // key值文本框文本 \r\n  valueLabel: 'value', // value 文本框显示文本\r\n\r\n  // radio select\r\n  options: null, // radio label, value [{label: '描述', value: 'type1'}]\r\n\r\n  // array可选参数 参照 FormExItemArray的参数\r\n  span: undefined, // 编辑时布局 用于children元素 children: [{bind: 'id', label: 'ID', span: 4}]\r\n  addText: '新增', // 编辑时新增文本\r\n\r\n  // selectTag\r\n  tokenSeparators: [','], // 分隔符\r\n}\r\n\r\nconst layout = {\r\n  labelCol: {\r\n    xs: { span: 12 },\r\n    sm: { span: 4 },\r\n  },\r\n  wrapperCol: {\r\n    xs: { span: 12 },\r\n    sm: { span: 18 },\r\n  },\r\n};\r\n\r\n\r\nexport default class DynamicFormEx2 extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      values: _.cloneDeep(props.defaultValues),\r\n    };\r\n  }\r\n\r\n  static defaultProps = {\r\n    title: '', // 编辑时弹窗标题\r\n    values: {}, // 完整数据\r\n    items: [], // 配置项 \r\n    onSubmit: (values) => {}, // 编辑保存时提交事件\r\n    gutter: 16, // row内填充\r\n    span: 8, // 单个元素占据多大 总共24\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {}\r\n\r\n  componentDidMount() {}\r\n\r\n  // 类表添加行\r\n  onArrayAdd = (dataIndex) => {\r\n    let listData = _.cloneDeep(_.get(this.state.values, dataIndex, []));\r\n    listData.push({});\r\n    this.form.setValue(dataIndex, listData);\r\n  }\r\n  // 列表删除行\r\n  onArrayDel = (dataIndex, index) => {\r\n    let listData = _.get(this.state.values, dataIndex, []);\r\n    listData.splice(index, 1);\r\n    this.form.setValue(dataIndex, listData);\r\n  }\r\n\r\n  // 根据列表数据生成对象数据结构\r\n  onSetObjectData = (listDataIndex, dataIndex) => {\r\n    let listData = _.get(this.state.values, listDataIndex, []);\r\n    let data = {};\r\n    listData.forEach(x => {\r\n      if (x && x !== '') {\r\n        data[x.key] = x.value\r\n      }\r\n    });\r\n    this.form.setValue(dataIndex, data);\r\n  }\r\n\r\n  // 根据索引删除属性 id = orign.ip\r\n  delProperty = (values, id) => {\r\n    let ids = id.split('.');\r\n    if (ids.length === 1) {\r\n      delete values[ids[0]];\r\n    } else {\r\n      let id = ids.splice(0, ids.length - 1).join('.');\r\n      values = _.get(values, id, {});\r\n      delete values[ids[ids.length - 1]];\r\n    }\r\n  }\r\n\r\n  onOneOfChange = (props, values, key, selLabel) => {\r\n    console.log(selLabel);\r\n    setTimeout(() => {\r\n      _.set(values, key, selLabel);\r\n      for (let opt of props.children) {\r\n        if (opt.label !== selLabel) {\r\n          for (let child of opt.children) {\r\n            this.delProperty(this.state.values, child.bind);\r\n          }\r\n        }\r\n      }\r\n      // this.from.setValues(this.state.values);\r\n    }, 2000);\r\n  }\r\n\r\n  renderDecorator = (props) => {\r\n    let self = this;\r\n    let decorator;\r\n\r\n    if (props.decorator) {\r\n      decorator = _.isFunction(props.decorator) ? props.decorator(props) : props.decorator;\r\n    }\r\n    // input \r\n    else if (props.type === 'input') {\r\n      decorator = <Input placeholder={props.placeholder}></Input>;\r\n    }\r\n    // radio\r\n    else if (props.type === 'radio') {\r\n      decorator = (\r\n        <RadioGroup>\r\n          { props.options.map( x => <Radio value={x.value} key={x.value}>{x.label}</Radio>)}\r\n        </RadioGroup>\r\n      );\r\n    }\r\n    // select \r\n    else if (props.type === 'select') {\r\n      decorator = (\r\n        <Select>\r\n          { props.options.map( x => <Option value={x.value} key={x.value}>{x.label}</Option>)}\r\n        </Select>\r\n      );\r\n    }\r\n    // 多选\r\n    else if (props.type === 'selectMult') {\r\n      decorator = (\r\n        <Select mode=\"tags\">\r\n          { props.options.map( x => <Option value={x.value} key={x.value}>{x.label}</Option>)}\r\n        </Select>\r\n      );\r\n    }\r\n    // 多重输入 \r\n    else if (props.type === 'selectTag') {\r\n      decorator = (\r\n        <Select mode=\"multiple\">\r\n          { props.options.map( x => <Option value={x.value} key={x.value}>{x.label}</Option>)}\r\n        </Select>\r\n      );\r\n    }\r\n    // checkbox\r\n    else if (props.type === 'checkbox') {\r\n      decorator = (\r\n        <Checkbox>{props.label}</Checkbox>\r\n      );\r\n    }\r\n    // checknbox grop\r\n    else if (props.type === 'checkboxGroup') {\r\n      decorator = (\r\n        <CheckboxGroup options={props.options}>{props.label}</CheckboxGroup>\r\n      );\r\n    }\r\n    // one of \r\n    else if (props.type === 'oneOf') {\r\n      decorator = (\r\n        <RadioGroup>\r\n          { props.options.map( x => <Radio value={x.value} key={x.value}>{x.label}</Radio>)}\r\n        </RadioGroup>\r\n      );\r\n    }\r\n    // array \r\n    else if (props.type === 'array') {\r\n      let listData = _.get(this.state.values, props.bind, []); // todo \r\n      let spanLength = Math.floor((24 - 2) / props.children.length);\r\n      decorator = (\r\n        <div>\r\n          { listData.map((d, index) => (\r\n            <Row gutter={8} key={index}>\r\n              { props.children.map( (x, i) => {\r\n                return <Col span={x.span ? x.span: spanLength} style={{paddingBottom: '4px'}} key={i}>\r\n                  <FormItem\r\n                    required={x.required} \r\n                    rules={x.rules}\r\n                    defaultValue={x.defaultValue} \r\n                    dataIndex={`${props.bind}[${index}].${x.bind}`} \r\n                    decorator={this.renderDecorator(x)}\r\n                  />\r\n                </Col>\r\n              })}\r\n              <Col span=\"2\">\r\n                <Icon className=\"dynamic-delete-button\" type=\"minus-circle-o\" onClick={() => this.onArrayDel(props.bind, index)}/>\r\n              </Col>\r\n            </Row>\r\n          ))}\r\n          <Button type=\"dashed\" onClick={() => this.onArrayAdd(props.bind)}><Icon type=\"plus\"/> {props.addText}</Button>\r\n        </div>\r\n      )\r\n    }\r\n    // object \r\n    else if (props.type === 'object') {\r\n      let dataIndex = '_dynamic.' + props.bind\r\n      let listData = _.get(this.state.values, dataIndex); // todo \r\n      let spanLength = Math.floor((24 - 2) / 2);\r\n      // 数据初始化\r\n      if (!listData) {\r\n        listData = [];\r\n        let data = _.get(this.state.values, props.bind, {});\r\n        for (let key of Object.keys(data)) {\r\n          listData.push({ key: key, value: data[key] });\r\n        }\r\n        setTimeout(() => {\r\n          this.form.setValue(dataIndex, listData);\r\n        });\r\n      }\r\n      decorator = (\r\n        <div>\r\n          { listData.map((d, index) => (\r\n            <Row gutter={8} key={index}>\r\n              <Col span={spanLength} style={{paddingBottom: '4px'}}>\r\n                <FormItem\r\n                  required\r\n                  dataIndex={`${dataIndex}[${index}].key`} \r\n                  decorator={\r\n                    <Input placeholder={props.keyLabel}></Input>\r\n                  }\r\n                  onChange={ \r\n                    _.debounce(() => {\r\n                      self.onSetObjectData(dataIndex, props.bind);\r\n                    }, 2000)\r\n                  }\r\n                />\r\n              </Col>\r\n              <Col span={spanLength} style={{paddingBottom: '4px'}}>\r\n                <FormItem\r\n                  required\r\n                  dataIndex={`${dataIndex}[${index}].value`} \r\n                  decorator={\r\n                    <Input placeholder={props.valueLabel}></Input>\r\n                  }\r\n                  onChange={\r\n                    _.debounce(() => {\r\n                      self.onSetObjectData(dataIndex, props.bind);\r\n                    }, 200)\r\n                  }\r\n                />\r\n              </Col>\r\n              <Col span=\"2\">\r\n                <Icon className=\"dynamic-delete-button\" type=\"minus-circle-o\" onClick={() => this.onArrayDel(dataIndex, index)}/>\r\n              </Col>\r\n            </Row>\r\n          ))}\r\n          <Button type=\"dashed\" onClick={() => this.onArrayAdd(dataIndex)}><Icon type=\"plus\"/> {props.addText}</Button>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return decorator;\r\n  }\r\n\r\n  renderItem = (item) => {\r\n    let items = []; // 单项可能会生成多个表单控件\r\n    let props = Object.assign({}, defaultItem, item); // 参数生成\r\n\r\n    let withDataIndex = true;\r\n    // 表单控件，还是只是布局所用。\r\n    if (props.type === 'array' || props.type === 'object' || !props.bind) {\r\n      withDataIndex = false;\r\n    }\r\n    // oneof 生成可选项\r\n    if (props.type === 'oneOf') {\r\n      withDataIndex = true;\r\n      props.bind = `_dynamic.${props.label}`;\r\n      props.options = [];\r\n      for (let opt of props.children) {\r\n        props.options.push({ label: opt.label, value: opt.label });\r\n      }\r\n    }\r\n    if (props.type === 'radio' && !props.options) {\r\n      props.options = [{ label: '是', value: true }, { label: '否', value: false }];\r\n    }\r\n\r\n    let decorator = this.renderDecorator(props);\r\n    if (props.disabled === true) {\r\n      decorator = React.cloneElement(decorator, {\r\n        disabled: true\r\n      });\r\n    }\r\n    items.push(\r\n      <FormItem\r\n        {...layout} \r\n        label={props.label} \r\n        required={props.required} \r\n        rules={props.rules}\r\n        defaultValue={ withDataIndex ? props.defaultValue : undefined} \r\n        dataIndex={ withDataIndex ? props.bind : undefined} \r\n        decorator={ withDataIndex ? decorator : undefined}\r\n      >\r\n        {withDataIndex ? null: decorator}\r\n      </FormItem>\r\n    );\r\n\r\n    if (props.type === 'oneOf') {\r\n      let currentSel = _.get(this.state.values, `_dynamic.${props.label}`);\r\n      // console.log(currentSel);\r\n      for (let opt of props.children) {\r\n        let optChild = [];\r\n        for (let child of opt.children) {\r\n          // 数据初始化\r\n          let value = _.get(this.state.values, child.bind);\r\n          if (value !== undefined && !currentSel && currentSel !== opt.label) {\r\n            setTimeout(() => {\r\n              this.form.setValue(`_dynamic.${props.label}`, opt.label);\r\n            });\r\n          }\r\n          optChild.push(\r\n            <FormItem\r\n              {...layout} \r\n              label={child.label} \r\n              required={child.required} \r\n              rules={child.rules}\r\n              defaultValue={ child.defaultValue } \r\n              dataIndex={ child.bind } \r\n              decorator={ this.renderDecorator(child)}\r\n            >\r\n            </FormItem>\r\n          );\r\n        }\r\n        items.push(\r\n          <div>{ _.get(this.state.values, `_dynamic.${props.label}`) === opt.label && optChild}</div>\r\n        )\r\n      }\r\n    }\r\n    return items;\r\n  }\r\n\r\n  renderChildren = () => {\r\n    let items = [];\r\n    this.props.items.forEach(item => {\r\n      items = items.concat(item ? this.renderItem(item) : []);\r\n    });\r\n    return React.Children.toArray(items);\r\n  }\r\n\r\n  render() {\r\n    let items = this.renderChildren();\r\n\r\n    return (\r\n      <div className={this.props.className}>\r\n        <FormEx2\r\n          defaultValues={this.props.defaultValues}\r\n          onChange={ values => {\r\n            console.log(values);\r\n            this.setState({ values: values});\r\n            this.props.onChange && this.props.onChange(values);\r\n          }}\r\n          ref={form => this.form = form}\r\n        >\r\n          {items}\r\n        </FormEx2>\r\n      </div>\r\n    )\r\n  }\r\n}"]}