{"version":3,"sources":["../../components/DynamicForm/controls.jsx"],"names":["React","Component","_","FormEx","SelectEx","InputEx","Input","Select","Col","Table","Radio","Checkbox","Popconfirm","Item","ItemArray","RadioGroup","Group","ViewBr","item","label","ViewText","get","values","gutter","span","render","bind","toString","ViewArray","float","x","isString","isBoolean","isArray","join","isPlainObject","Object","keys","map","key","columns","children","i","_index","title","dataIndex","withEditCol","push","text","record","index","onArrayChildEdit","delConfirm","onArrayChildDel","rowKey","viewNode","node","type","opt","baseControls","formBase","layout","defaultItem","setChange","getValues","isArrayChild","set","id","value","cloneDeep","control","isFunction","placeholder","addonBefore","addonAfter","disabled","options","selectLabel","selectBind","width","tokenSeparators","props","required","rule","onChange","defaultValue","formArray","nodes","forEach","child","assign","withLabel","labelCol","xs","sm","wrapperCol","indexOf","console","log","Children","toArray","formObject","bindCopy","keyText","valueText","obj","list","v","delProperty","ids","split","length","splice","formOne","newValues","option","optionChildren","formNode","childItem","controls","radio"],"mappings":"AAAA;;;AAGA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,SAASC,MAAT,EAAiBC,QAAjB,EAA2BC,OAA3B,QAA0C,gBAA1C;AACA,SAASC,KAAT,EAAgBC,MAAhB,EAAwBC,GAAxB,EAA6BC,KAA7B,EAAoCC,KAApC,EAA2CC,QAA3C,EAAqDC,UAArD,QAAuE,MAAvE;;AAEA,IAAMC,OAAOV,OAAOU,IAApB;AACA,IAAMC,YAAYX,OAAOW,SAAzB;AACA,IAAMC,aAAaL,MAAMM,KAAzB;;AAGA,SAASC,MAAT,OAA0B;AAAA,MAARC,IAAQ,QAARA,IAAQ;;AACxB,SAAO;AAAC,OAAD;AAAA,MAAK,MAAM,EAAX;AAAgBA,SAAKC;AAArB,GAAP;AACD;;AAED,SAASC,QAAT,QAAuD;AAAA,MAAnCF,IAAmC,SAAnCA,IAAmC;AAAA,MAA7BG,GAA6B,SAA7BA,GAA6B;AAAA,MAAxBC,MAAwB,SAAxBA,MAAwB;AAAA,MAAhBC,MAAgB,SAAhBA,MAAgB;AAAA,MAARC,IAAQ,SAARA,IAAQ;;AACrD,MAAIN,KAAKO,MAAT,EAAiB;AACf,WAAO;AAAC,SAAD;AAAA,QAAK,MAAMD,IAAX;AAAkBN,WAAKC,KAAvB;AAAA;AAA+BD,WAAKO,MAAL,CAAYJ,IAAIH,KAAKQ,IAAT,CAAZ,EAA4BJ,MAA5B;AAA/B,KAAP;AACD;;AAED,SAAO;AAAC,OAAD;AAAA,MAAK,MAAME,IAAX;AAAkBN,SAAKC,KAAvB;AAAA;AAAgCE,QAAIH,KAAKQ,IAAT,EAAe,EAAf,MAAuB,IAAvB,GAA8B,IAA9B,GAAqCL,IAAIH,KAAKQ,IAAT,EAAe,EAAf,EAAmBC,QAAnB;AAArE,GAAP,CALqD,CAK6D;AACnH;;AAED,SAASC,SAAT,QAAwD;AAAA,MAAnCV,IAAmC,SAAnCA,IAAmC;AAAA,MAA7BG,GAA6B,SAA7BA,GAA6B;AAAA,MAAxBC,MAAwB,SAAxBA,MAAwB;AAAA,MAAhBC,MAAgB,SAAhBA,MAAgB;AAAA,MAARC,IAAQ,SAARA,IAAQ;;AACtD,MAAIN,KAAKO,MAAT,EAAiB;AACf,WAAO;AAAC,SAAD;AAAA,QAAK,MAAMD,IAAX;AAAiB;AAAA;AAAA,UAAK,OAAO,EAACK,OAAO,MAAR,EAAZ;AAA8BX,aAAKC,KAAnC;AAAA;AAAA,OAAjB;AAAiE;AAAA;AAAA,UAAK,OAAO,EAACU,OAAO,MAAR,EAAZ;AAA8BX,aAAKO,MAAL,CAAYJ,IAAIH,KAAKQ,IAAT,CAAZ,EAA4BJ,MAA5B;AAA9B;AAAjE,KAAP;AACD;AACD,MAAMG,SAAS,SAATA,MAAS,GAAY;AAAA,QAAXK,CAAW,uEAAP,EAAO;;AACzB,QAAI5B,EAAE6B,QAAF,CAAWD,CAAX,KAAiB5B,EAAE8B,SAAF,CAAYF,CAAZ,CAArB,EAAqC;AACnC,aAAOA,EAAEH,QAAF,EAAP;AACD,KAFD,MAEO,IAAIzB,EAAE+B,OAAF,CAAUH,CAAV,CAAJ,EAAkB;AACvB,aAAOA,EAAEI,IAAF,CAAO,IAAP,CAAP;AACD,KAFM,MAEA,IAAIhC,EAAEiC,aAAF,CAAgBL,CAAhB,CAAJ,EAAwB;AAC7B,aAAOM,OAAOC,IAAP,CAAYP,CAAZ,EAAeQ,GAAf,CAAmB;AAAA,eAAUC,GAAV,SAAiBT,EAAES,GAAF,CAAjB;AAAA,OAAnB,CAAP;AACD;AACF,GARD;AASA,MAAIC,UAAUtB,KAAKuB,QAAL,CAAcH,GAAd,CAAkB,UAACR,CAAD,EAAIY,CAAJ,EAAU;AACxCZ,MAAEa,MAAF,GAAWD,CAAX;AACA,WAAO;AACLE,aAAOd,EAAEX,KADJ;AAEL0B,iBAAWf,EAAEJ,IAFR;AAGLD,cAAQK,EAAEL,MAAF,GAAWK,EAAEL,MAAb,GAAsBA;AAHzB,KAAP;AAKD,GAPa,CAAd;AAQA,MAAIP,KAAK4B,WAAT,EAAsB;AACpBN,YAAQO,IAAR,CAAa;AACXH,aAAO,IADI;AAEXnB,cAAQ,gBAACuB,IAAD,EAAOC,MAAP,EAAeC,KAAf;AAAA,eAAyB;AAAA;AAAA;AAC/B;AAAA;AAAA,cAAG,SAAS,mBAAM;AAAChC,qBAAKiC,gBAAL,CAAsBjC,KAAKQ,IAA3B,EAAiCwB,KAAjC;AAAwC,eAA3D;AAAA;AAAA,WAD+B;AAAA;AAE/B;AAAC,sBAAD;AAAA,cAAY,WAAU,KAAtB,EAA4B,OAAOhC,KAAKkC,UAAL,GAAkB,iBAAlB,GAAsC,WAAzE,EAAsF,WAAW,qBAAM;AAAClC,qBAAKmC,eAAL,CAAqBnC,KAAKQ,IAA1B,EAAgCwB,KAAhC;AAAuC,eAA/I,EAAiJ,QAAO,cAAxJ,EAA6J,YAAW,cAAxK;AACE;AAAA;AAAA;AAAA;AAAA;AADF;AAF+B,SAAzB;AAAA;AAFG,KAAb;AASD;AACD,SACE;AAAC,OAAD;AAAA,MAAK,MAAM,EAAX;AACE,wBAAC,KAAD,IAAO,YAAY7B,IAAIH,KAAKQ,IAAT,CAAnB,EAAmC,MAAK,OAAxC,EAAgD,QAAQR,KAAKoC,MAAL,IAAe,QAAvE,EAAiF,YAAY,KAA7F,EAAoG,SAASd,OAA7G;AADF,GADF;AAKD;;AAED,OAAO,SAASe,QAAT,QAAuD;AAAA,MAAnCrC,IAAmC,SAAnCA,IAAmC;AAAA,MAA7BG,GAA6B,SAA7BA,GAA6B;AAAA,MAAxBC,MAAwB,SAAxBA,MAAwB;AAAA,MAAhBC,MAAgB,SAAhBA,MAAgB;AAAA,MAARC,IAAQ,SAARA,IAAQ;;AAC5D,MAAIgC,aAAJ;AACA,MAAItC,KAAKuC,IAAL,KAAc,IAAlB,EAAwB;AACtBD,WAAO,oBAAC,MAAD,IAAQ,MAAMtC,IAAd,GAAP;AACD,GAFD,MAEO,IAAIA,KAAKuC,IAAL,KAAc,OAAlB,EAA2B;AAChCD,WAAO,oBAAC,SAAD,IAAW,MAAMtC,IAAjB,EAAuB,KAAKG,GAA5B,EAAiC,QAAQC,MAAzC,EAAiD,QAAQC,MAAzD,EAAiE,MAAMC,IAAvE,GAAP;AACD,GAFM,MAEA,IAAIN,KAAKuC,IAAL,KAAc,QAAlB,EAA4B;AACjC,QAAI,CAACvC,KAAKO,MAAV,EACEP,KAAKO,MAAL,GAAc;AAAA,UAACK,CAAD,uEAAK,EAAL;AAAA,aAAYM,OAAOC,IAAP,CAAYP,CAAZ,EAAeQ,GAAf,CAAmB;AAAA,eAAUC,GAAV,UAAkBT,EAAES,GAAF,CAAlB;AAAA,OAAnB,CAAZ;AAAA,KAAd;AACFiB,WAAO,oBAAC,QAAD,IAAU,MAAMtC,IAAhB,EAAsB,KAAKG,GAA3B,EAAgC,QAAQC,MAAxC,EAAgD,QAAQC,MAAxD,EAAgE,MAAMC,IAAtE,GAAP;AACD,GAJM,MAIA,IAAIN,KAAKuC,IAAL,KAAc,OAAlB,EAA2B;AAChCD,WAAO,EAAP;AADgC;AAAA;AAAA;;AAAA;AAEhC,2BAAgBtC,KAAKuB,QAArB,8HAA+B;AAAA,YAAtBiB,GAAsB;AAAA;AAAA;AAAA;;AAAA;AAC7B,gCAAcA,IAAIjB,QAAlB,mIAA4B;AAAA,gBAAnBX,CAAmB;;AAC1B0B,iBAAKT,IAAL,CAAU,oBAAC,QAAD,IAAU,MAAMjB,CAAhB,EAAmB,KAAKT,GAAxB,EAA6B,QAAQC,MAArC,EAA4C,QAAQC,MAApD,EAA4D,MAAMC,IAAlE,GAAV;AACD;AAH4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAI9B;AAN+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOjC,GAPM,MAOA;AACLgC,WAAO,oBAAC,QAAD,IAAU,MAAMtC,IAAhB,EAAsB,KAAKG,GAA3B,EAAgC,QAAQC,MAAxC,EAAgD,QAAQC,MAAxD,EAAgE,MAAMC,IAAtE,GAAP;AACD;AACD,SAAOgC,IAAP;AACD;;AAED,IAAMG,eAAe,CAAC,OAAD,EAAU,OAAV,EAAmB,QAAnB,EAA6B,UAA7B,EAAyC,WAAzC,EAAsD,IAAtD,CAArB;AACA;AACA,SAASC,QAAT,GAA+G;AAAA,kFAAJ,EAAI;AAAA,MAA3F1C,IAA2F,SAA3FA,IAA2F;AAAA,MAArF2C,MAAqF,SAArFA,MAAqF;AAAA,MAA7EvC,MAA6E,SAA7EA,MAA6E;AAAA,MAArED,GAAqE,SAArEA,GAAqE;AAAA,MAAhEyC,WAAgE,SAAhEA,WAAgE;AAAA,MAAnDC,SAAmD,SAAnDA,SAAmD;AAAA,MAAxCC,SAAwC,SAAxCA,SAAwC;AAAA,iCAA7BC,YAA6B;AAAA,MAA7BA,YAA6B,sCAAd,KAAc;;AAC7G,WAASC,GAAT,CAAaC,EAAb,EAAiBC,KAAjB,EAAwB;AACtB;AACA;AACA9C,aAASpB,EAAEmE,SAAF,CAAYL,WAAZ,CAAT;AACA;AACA9D,MAAEgE,GAAF,CAAM5C,MAAN,EAAc6C,EAAd,EAAkBC,KAAlB;AACAL,cAAUzC,MAAV;AACD;;AAED,MAAIgD,UAAU,IAAd;AACA,MAAIpE,EAAEqE,UAAF,CAAarD,KAAKoD,OAAlB,CAAJ,EAAgC;AAC9BA,cAAUpD,KAAKoD,OAAL,CAAaN,WAAb,EAA0BE,GAA1B,CAAV;AACD,GAFD,MAEO,IAAIhD,KAAKoD,OAAT,EAAkB;AACvBA,cAAUpD,KAAKoD,OAAf;AACD,GAFM,MAEA;AACL,YAAQpD,KAAKuC,IAAb;AACE,WAAK,OAAL;AACEa,kBAAU,oBAAC,OAAD,IAAS,MAAK,MAAd,EAAqB,aAAapD,KAAKsD,WAAL,IAAoBtD,KAAKC,KAA3D,EAAkE,aAAaD,KAAKuD,WAApF,EAAiG,YAAYvD,KAAKwD,UAAlH,EAA8H,UAAUxD,KAAKyD,QAA7I,GAAV;AACA;AACF,WAAK,OAAL;AACE,YAAI,CAACzD,KAAK0D,OAAV,EAAmB;AACjB1D,eAAK0D,OAAL,GAAe,CAAC,EAAER,OAAO,IAAT,EAAejD,OAAO,GAAtB,EAAD,EAA8B,EAAEiD,OAAO,KAAT,EAAgBjD,OAAO,GAAvB,EAA9B,CAAf;AACD;AACDmD,kBACE;AAAC,oBAAD;AAAA;AAAA;AAAcL,0BAAgB;AAAA;AAAA;AAAO/C,iBAAKC,KAAZ;AAAA;AAAA,WAA9B;AACID,eAAK0D,OAAL,CAAatC,GAAb,CAAkB;AAAA,mBAAK;AAAC,mBAAD;AAAA,gBAAO,OAAOR,EAAEsC,KAAhB,EAAuB,KAAKtC,EAAEsC,KAA9B;AAAsCtC,gBAAEX;AAAxC,aAAL;AAAA,WAAlB;AADJ,SADF;AAIA;AACF,WAAK,OAAL;AACE,YAAI,CAACD,KAAK0D,OAAV,EAAmB;AACjB1D,eAAK0D,OAAL,GAAe,CAAC,EAAER,OAAO,IAAT,EAAejD,OAAO,GAAtB,EAAD,EAA8B,EAAEiD,OAAO,KAAT,EAAgBjD,OAAO,GAAvB,EAA9B,CAAf;AACD;AACDmD,kBACE;AAAC,oBAAD;AAAA;AACIpD,eAAK0D,OAAL,CAAatC,GAAb,CAAkB;AAAA,mBAAK;AAAC,mBAAD;AAAA,gBAAO,OAAOR,EAAEsC,KAAhB,EAAuB,KAAKtC,EAAEsC,KAA9B;AAAsCtC,gBAAEX;AAAxC,aAAL;AAAA,WAAlB;AADJ,SADF;AAIA;AACF,WAAK,QAAL;AACE,YAAI,CAACD,KAAK0D,OAAV,EAAmB;AACjB1D,eAAK0D,OAAL,GAAe,EAAf;AACD;AACDN,kBAAU,oBAAC,QAAD,IAAU,SAASpD,KAAK0D,OAAxB,EAAiC,OAAO1D,KAAK2D,WAA7C,EAA0D,MAAM3D,KAAK4D,UAArE,GAAV;AACA;AACF,WAAK,UAAL;AACER,kBAAU;AAAC,kBAAD;AAAA;AAAYpD,eAAKC;AAAjB,SAAV;AACA;AACF,WAAK,WAAL;AACEmD,kBAAU,oBAAC,MAAD,IAAQ,MAAK,MAAb,EAAoB,OAAO,EAAES,OAAO,MAAT,EAA3B,EAA8C,iBAAiB7D,KAAK8D,eAApE,EAAqF,aAAa9D,KAAKC,KAAvG,GAAV;AACA;AACF;AACE;AAnCJ;AAqCD;AACD,MAAI8D,QAAQ,EAAEvD,MAAMR,KAAKQ,IAAb,EAAmBwD,UAAUhE,KAAKgE,QAAlC,EAA4CC,MAAMjE,KAAKiE,IAAvD,EAA6DC,UAAUlE,KAAKkE,QAA5E,EAAsFC,cAAcnE,KAAKmE,YAAzG,EAAZ;AACA,MAAIpB,YAAJ,EAAkB;AAChB,WAAO;AAAC,UAAD;AAAUgB,WAAV;AAAkBX;AAAlB,KAAP;AACD;AACD,SAAO;AAAC,QAAD;AAAA,sBAAUT,MAAV,EAAsBoB,KAAtB,IAA6B,OAAO/D,KAAKC,KAAzC;AAAiDmD;AAAjD,GAAP;AACD;;AAED,SAASgB,SAAT,QAAuD;AAAA,MAAlCpE,IAAkC,SAAlCA,IAAkC;AAAA,MAA5B2C,MAA4B,SAA5BA,MAA4B;AAAA,MAApBC,WAAoB,SAApBA,WAAoB;AAAA,MAAPzC,GAAO,SAAPA,GAAO;;AACrD,MAAIkE,QAAQ,EAAZ;AACArE,OAAKuB,QAAL,CAAc+C,OAAd,CAAsB,iBAAS;AAC7BC,YAAQrD,OAAOsD,MAAP,CAAc,EAAd,EAAkB5B,WAAlB,EAA+B2B,KAA/B,CAAR;AACA,QAAIA,MAAME,SAAV,EAAqB;AACnB,UAAInC,OAAOI,SAAS;AAClB1C,cAAMuE,KADY;AAElB5B,gBAAQ4B,MAAM5B,MAAN,IAAgB;AACtB+B,oBAAU;AACRC,gBAAI,EAAErE,MAAM,EAAR,EADI;AAERsE,gBAAI,EAAEtE,MAAM,EAAR;AAFI,WADY;AAKtBuE,sBAAY;AACVF,gBAAI,EAAErE,MAAM,EAAR,EADM;AAEVsE,gBAAI,EAAEtE,MAAM,EAAR;AAFM;AALU,SAFN;AAYlByC,sBAAc,KAZI;AAalB5C;AAbkB,OAAT,CAAX;AAeAkE,YAAMxC,IAAN,CAAWS,IAAX;AACD,KAjBD,MAiBO,IAAItD,EAAE8F,OAAF,CAAUrC,YAAV,EAAwB8B,MAAMhC,IAA9B,KAAuC,CAA3C,EAA8C;AACnD,UAAID,QAAOI,SAAS,EAAE1C,MAAMuE,KAAR,EAAe5B,cAAf,EAAuBI,cAAc,IAArC,EAA2C5C,QAA3C,EAAT,CAAX;AACAkE,YAAMxC,IAAN,CAAWS,KAAX;AACD,KAHM,MAGA;AACLyC,cAAQC,GAAR,CAAY,kCAAZ;AACD;AACF,GAzBD;AA0BA,SACE;AAAC,aAAD;AAAA,sBAAerC,MAAf,IAAuB,OAAO3C,KAAKC,KAAnC,EAA0C,MAAMD,KAAKQ,IAArD,EAA2D,cAAcR,KAAKmE,YAAL,IAAqB,EAA9F;AACIrF,UAAMmG,QAAN,CAAeC,OAAf,CAAuBb,KAAvB;AADJ,GADF;AAID;;AAED,SAASc,UAAT,QAAmD;AAAA,MAA7BnF,IAA6B,SAA7BA,IAA6B;AAAA,MAAvB2C,MAAuB,SAAvBA,MAAuB;AAAA,MAAfvC,MAAe,SAAfA,MAAe;AAAA,MAAPD,GAAO,SAAPA,GAAO;;AACjDH,OAAKoF,QAAL,GAAgBpF,KAAKQ,IAArB;AACAR,OAAKQ,IAAL,GAAY,oBAAoBR,KAAKoF,QAAzB,GAAoCpF,KAAKC,KAArD;AACAD,OAAKuB,QAAL,GAAgB,CACd,EAAEgB,MAAM,OAAR,EAAiBtC,OAAOD,KAAKqF,OAA7B,EAAsC7E,MAAM,KAA5C,EAAmDwD,UAAU,IAA7D,EADc,EAEd,EAAEzB,MAAM,OAAR,EAAiBtC,OAAOD,KAAKsF,SAA7B,EAAwC9E,MAAM,OAA9C,EAAuDwD,UAAU,IAAjE,EAFc,CAAhB;AAIA;AACA,MAAIuB,MAAMpF,IAAIH,KAAKoF,QAAT,EAAmB,EAAnB,CAAV;AACA,MAAII,OAAOtE,OAAOC,IAAP,CAAYoE,GAAZ,EAAiBnE,GAAjB,CAAqB,eAAO;AACrC,WAAO,EAAEC,QAAF,EAAO6B,OAAOqC,IAAIlE,GAAJ,CAAd,EAAP;AACD,GAFU,CAAX;AAGArB,OAAKmE,YAAL,GAAoBqB,IAApB;AACA;AACA,WAAStB,QAAT,CAAkB9D,MAAlB,EAA0BiB,GAA1B,EAA+BoE,CAA/B,EAAkC;AAChC,QAAIF,MAAM,EAAV;AACAvG,MAAEmB,GAAF,CAAMC,MAAN,EAAcJ,KAAKQ,IAAnB,EAAyB,EAAzB,EAA6B8D,OAA7B,CAAqC,aAAK;AACxCiB,UAAI3E,EAAES,GAAN,IAAaT,EAAEsC,KAAf;AACD,KAFD;AAGAlE,MAAEgE,GAAF,CAAM5C,MAAN,EAAcJ,KAAKoF,QAAnB,EAA6BG,GAA7B;AACA,WAAOnF,MAAP;AACD;AACDJ,OAAKuB,QAAL,CAAc+C,OAAd,CAAsB,iBAAS;AAC7BC,UAAML,QAAN,GAAiBA,QAAjB;AACD,GAFD;AAGA,SAAOE,UAAU,EAAEpE,UAAF,EAAQ2C,cAAR,EAAgBvC,cAAhB,EAAwBD,QAAxB,EAAV,CAAP;AACD;;AAED;AACA,SAASuF,WAAT,CAAqBtF,MAArB,EAA6B6C,EAA7B,EAAiC;AAC/B,MAAI0C,MAAM1C,GAAG2C,KAAH,CAAS,GAAT,CAAV;AACA,MAAID,IAAIE,MAAJ,KAAe,CAAnB,EAAsB;AACpB,WAAOzF,OAAOuF,IAAI,CAAJ,CAAP,CAAP;AACD,GAFD,MAEO;AACL,QAAI1C,MAAK0C,IAAIG,MAAJ,CAAW,CAAX,EAAcH,IAAIE,MAAJ,GAAa,CAA3B,EAA8B7E,IAA9B,CAAmC,GAAnC,CAAT;AACAZ,aAASpB,EAAEmB,GAAF,CAAMC,MAAN,EAAc6C,GAAd,EAAkB,EAAlB,CAAT;AACA,WAAO7C,OAAOuF,IAAIA,IAAIE,MAAJ,GAAa,CAAjB,CAAP,CAAP;AACD;AACF;;AAED,SAASE,OAAT,QAAgD;AAAA,MAA7B/F,IAA6B,SAA7BA,IAA6B;AAAA,MAAvB2C,MAAuB,SAAvBA,MAAuB;AAAA,MAAfvC,MAAe,SAAfA,MAAe;AAAA,MAAPD,GAAO,SAAPA,GAAO;;AAC9C;AACAH,OAAKQ,IAAL,GAAY,0BAA0BR,KAAKC,KAA3C;AACAD,OAAKkE,QAAL,GAAgB,UAAS8B,SAAT,EAAoB3E,GAApB,EAAyB6B,KAAzB,EAAgC;AAC9C;AAD8C;AAAA;AAAA;;AAAA;AAE9C,4BAAmBlD,KAAKuB,QAAxB,mIAAkC;AAAA,YAAzB0E,MAAyB;;AAChC,YAAIA,OAAOhG,KAAP,KAAiBiD,KAArB,EAA4B;AAC1B+C,iBAAO1E,QAAP,CAAgB+C,OAAhB,CAAwB,aAAK;AAC3BoB,wBAAYM,SAAZ,EAAuBpF,EAAEJ,IAAzB;AACD,WAFD;AAGD;AACF;AAR6C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAS9C,WAAOwF,SAAP;AACD,GAVD;AAWAhG,OAAK0D,OAAL,GAAe1D,KAAKuB,QAAL,CAAcH,GAAd,CAAkB,aAAK;AACpC,WAAO,EAAE8B,OAAOtC,EAAEX,KAAX,EAAkBA,OAAOW,EAAEX,KAA3B,EAAP;AACD,GAFc,CAAf;AAGA;AACAD,OAAKmE,YAAL,GAAoBnE,KAAKuB,QAAL,CAAc,CAAd,EAAiBtB,KAArC;AACA,MAAIuF,OAAO,EAAX;AAnB8C;AAAA;AAAA;;AAAA;AAoB9C,0BAAmBxF,KAAKuB,QAAxB,mIAAkC;AAAA,UAAzB0E,MAAyB;;AAChC,UAAIC,iBAAiBD,OAAO1E,QAAP,CAAgBH,GAAhB,CAAoB;AAAA,eAAa+E,SAAS,EAAEnG,MAAMoG,SAAR,EAAmBzD,cAAnB,EAA2BvC,cAA3B,EAAmCD,QAAnC,EAAT,CAAb;AAAA,OAApB,CAArB;AACA,UAAIkG,WACF;AAAA;AAAA;AACIlG,YAAIH,KAAKQ,IAAT,MAAmByF,OAAOhG,KAA1B,IACAnB,MAAMmG,QAAN,CAAeC,OAAf,CAAuBgB,cAAvB;AAFJ,OADF;AAMAV,WAAK3D,IAAL,CAAUwE,QAAV;AACD;AA7B6C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA8B9C,MAAIC,QAAQ5D,SAAS,EAAE1C,UAAF,EAAQ2C,cAAR,EAAgBvC,cAAhB,EAAwBD,QAAxB,EAAT,CAAZ;;AAEA,SAAO,CAACmG,KAAD,EAAQd,IAAR,CAAP;AACD;;AAED;AACA,OAAO,SAASW,QAAT,QAAoF;AAAA,MAAhEnG,IAAgE,SAAhEA,IAAgE;AAAA,MAA1D2C,MAA0D,SAA1DA,MAA0D;AAAA,MAAlDvC,MAAkD,SAAlDA,MAAkD;AAAA,MAA1CD,GAA0C,SAA1CA,GAA0C;AAAA,MAArCyC,WAAqC,SAArCA,WAAqC;AAAA,MAAxBC,SAAwB,SAAxBA,SAAwB;AAAA,MAAbC,SAAa,SAAbA,SAAa;;AACzF9C,SAAOkB,OAAOsD,MAAP,CAAc,EAAd,EAAkB5B,WAAlB,EAA+B5C,IAA/B,CAAP;AACA,MAAIuC,OAAOvC,KAAKuC,IAAhB;AACA,MAAIvD,EAAE8F,OAAF,CAAUrC,YAAV,EAAwBF,IAAxB,KAAiC,CAArC,EAAwC;AACtC,WAAOG,SAAS,EAAE1C,UAAF,EAAQ2C,cAAR,EAAgBvC,cAAhB,EAAwBD,QAAxB,EAA6ByC,wBAA7B,EAA0CC,oBAA1C,EAAqDC,oBAArD,EAAT,CAAP;AACD,GAFD,MAEO,IAAIP,SAAS,OAAb,EAAsB;AAC3B,WAAO6B,UAAU,EAAEpE,UAAF,EAAQ2C,cAAR,EAAgBvC,cAAhB,EAAwBD,QAAxB,EAA6ByC,wBAA7B,EAA0CC,oBAA1C,EAAqDC,oBAArD,EAAV,CAAP;AACD,GAFM,MAEA,IAAIP,SAAS,QAAb,EAAuB;AAC5B,WAAO4C,WAAW,EAAEnF,UAAF,EAAQ2C,cAAR,EAAgBvC,cAAhB,EAAwBD,QAAxB,EAA6ByC,wBAA7B,EAA0CC,oBAA1C,EAAqDC,oBAArD,EAAX,CAAP;AACD,GAFM,MAEA,IAAIP,SAAS,OAAb,EAAsB;AAC3B,WAAOwD,QAAQ,EAAE/F,UAAF,EAAQ2C,cAAR,EAAgBvC,cAAhB,EAAwBD,QAAxB,EAA6ByC,wBAA7B,EAA0CC,oBAA1C,EAAqDC,oBAArD,EAAR,CAAP;AACD,GAFM,MAEA;AACLiC,YAAQC,GAAR,CAAY,wBAAZ;AACAD,YAAQC,GAAR,CAAYhF,IAAZ;AACD;AACF","file":"controls.js","sourcesContent":["/**\r\n * 表单组件\r\n */\r\nimport React, { Component } from 'react';\r\nimport _ from 'lodash';\r\nimport { FormEx, SelectEx, InputEx } from 'src/components';\r\nimport { Input, Select, Col, Table, Radio, Checkbox, Popconfirm } from 'antd';\r\n\r\nconst Item = FormEx.Item;\r\nconst ItemArray = FormEx.ItemArray;\r\nconst RadioGroup = Radio.Group;\r\n\r\n\r\nfunction ViewBr({ item }) {\r\n  return <Col span={24}>{item.label}</Col>\r\n}\r\n\r\nfunction ViewText({ item, get, values, gutter, span }) {\r\n  if (item.render) {\r\n    return <Col span={span}>{item.label}：{item.render(get(item.bind), values)}</Col>\r\n  }\r\n\r\n  return <Col span={span}>{item.label}：{ get(item.bind, '') === null ? null : get(item.bind, '').toString() }</Col> //兼容一下null的情况\r\n}\r\n\r\nfunction ViewArray({ item, get, values, gutter, span }) {\r\n  if (item.render) {\r\n    return <Col span={span}><div style={{float: 'left'}}>{item.label}：</div><div style={{float: 'left'}}>{item.render(get(item.bind), values)}</div></Col>\r\n  }\r\n  const render = (x = '') => {\r\n    if (_.isString(x) || _.isBoolean(x)) {\r\n      return x.toString();\r\n    } else if (_.isArray(x)) {\r\n      return x.join(', ');\r\n    } else if (_.isPlainObject(x)) {\r\n      return Object.keys(x).map(key => `${key}:${x[key]}; `)\r\n    }\r\n  }\r\n  let columns = item.children.map((x, i) => {\r\n    x._index = i;\r\n    return {\r\n      title: x.label,\r\n      dataIndex: x.bind,\r\n      render: x.render ? x.render : render\r\n    }\r\n  });\r\n  if (item.withEditCol) {\r\n    columns.push({\r\n      title: '操作',\r\n      render: (text, record, index) => <span>\r\n        <a onClick={() => {item.onArrayChildEdit(item.bind, index)}}>编辑</a>&nbsp;\r\n        <Popconfirm placement=\"top\" title={item.delConfirm ? 'item.delConfirm' : '确定删除该条目吗？'} onConfirm={() => {item.onArrayChildDel(item.bind, index)}} okText=\"确定\" cancelText=\"取消\">\r\n          <a>删除</a>\r\n        </Popconfirm>\r\n      </span>\r\n    });\r\n  }\r\n  return (\r\n    <Col span={24}>\r\n      <Table dataSource={get(item.bind)} size=\"small\" rowKey={item.rowKey || '_index'} pagination={false} columns={columns}/>\r\n    </Col>\r\n  )\r\n}\r\n\r\nexport function viewNode({ item, get, values, gutter, span }) {\r\n  let node;\r\n  if (item.type === 'br') {\r\n    node = <ViewBr item={item}/>\r\n  } else if (item.type === 'array') {\r\n    node = <ViewArray item={item} get={get} values={values} gutter={gutter} span={span}/>\r\n  } else if (item.type === 'object') {\r\n    if (!item.render)\r\n      item.render = (x = {}) => Object.keys(x).map(key => `${key}: ${x[key]}, `);\r\n    node = <ViewText item={item} get={get} values={values} gutter={gutter} span={span} />\r\n  } else if (item.type === 'oneOf') {\r\n    node = [];\r\n    for (let opt of item.children) {\r\n      for (let x of opt.children) {\r\n        node.push(<ViewText item={x} get={get} values={values}gutter={gutter} span={span} />)\r\n      }\r\n    }\r\n  } else {\r\n    node = <ViewText item={item} get={get} values={values} gutter={gutter} span={span}/>\r\n  }\r\n  return node;\r\n}\r\n\r\nconst baseControls = ['input', 'radio', 'select', 'checkbox', 'selectTag', 'br'];\r\n// 基本组件\r\nfunction formBase({ item, layout, values, get, defaultItem, setChange, getValues, isArrayChild = false } = {}) {\r\n  function set(id, value) {\r\n    // console.log(id);\r\n    // console.log(value);\r\n    values = _.cloneDeep(getValues());\r\n    // console.log(values);\r\n    _.set(values, id, value);\r\n    setChange(values);\r\n  }\r\n\r\n  let control = null;\r\n  if (_.isFunction(item.control)) {\r\n    control = item.control(getValues(), set);\r\n  } else if (item.control) {\r\n    control = item.control;\r\n  } else {\r\n    switch (item.type) {\r\n      case 'input':\r\n        control = <InputEx type=\"text\" placeholder={item.placeholder || item.label} addonBefore={item.addonBefore} addonAfter={item.addonAfter} disabled={item.disabled}/>;\r\n        break;\r\n      case 'radio':\r\n        if (!item.options) {\r\n          item.options = [{ value: true, label: '是' }, { value: false, label: '否' }];\r\n        }\r\n        control = (\r\n          <RadioGroup> {isArrayChild && <span>{item.label}: </span>}\r\n            { item.options.map( x => <Radio value={x.value} key={x.value}>{x.label}</Radio>)}\r\n          </RadioGroup>)\r\n        break;\r\n      case 'oneOf':\r\n        if (!item.options) {\r\n          item.options = [{ value: true, label: '是' }, { value: false, label: '否' }];\r\n        }\r\n        control = (\r\n          <RadioGroup>\r\n            { item.options.map( x => <Radio value={x.value} key={x.value}>{x.label}</Radio>)}\r\n          </RadioGroup>)\r\n        break;\r\n      case 'select':\r\n        if (!item.options) {\r\n          item.options = [];\r\n        }\r\n        control = <SelectEx options={item.options} label={item.selectLabel} bind={item.selectBind}/>;\r\n        break;\r\n      case 'checkbox':\r\n        control = <Checkbox >{item.label}</Checkbox>;\r\n        break;\r\n      case 'selectTag':\r\n        control = <Select mode=\"tags\" style={{ width: '100%' }} tokenSeparators={item.tokenSeparators} placeholder={item.label} />;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n  let props = { bind: item.bind, required: item.required, rule: item.rule, onChange: item.onChange, defaultValue: item.defaultValue };\r\n  if (isArrayChild) {\r\n    return <Item {...props}>{control}</Item>\r\n  }\r\n  return <Item {...layout} {...props} label={item.label}>{control}</Item>\r\n}\r\n\r\nfunction formArray({ item, layout, defaultItem, get }) {\r\n  let nodes = [];\r\n  item.children.forEach(child => {\r\n    child = Object.assign({}, defaultItem, child);\r\n    if (child.withLabel) {\r\n      let node = formBase({\r\n        item: child,\r\n        layout: child.layout || {\r\n          labelCol: {\r\n            xs: { span: 12 },\r\n            sm: { span: 12 },\r\n          },\r\n          wrapperCol: {\r\n            xs: { span: 12 },\r\n            sm: { span: 12 },\r\n          },\r\n        },\r\n        isArrayChild: false,\r\n        get\r\n      });\r\n      nodes.push(node);\r\n    } else if (_.indexOf(baseControls, child.type) >= 0) {\r\n      let node = formBase({ item: child, layout, isArrayChild: true, get });\r\n      nodes.push(node);\r\n    } else {\r\n      console.log('DynamicForm: formArray 存在未定义type');\r\n    }\r\n  });\r\n  return (\r\n    <ItemArray {...layout} label={item.label} bind={item.bind} defaultValue={item.defaultValue || []}>\r\n      { React.Children.toArray(nodes)}\r\n    </ItemArray>)\r\n}\r\n\r\nfunction formObject({ item, layout, values, get }) {\r\n  item.bindCopy = item.bind;\r\n  item.bind = '_dynamic.array_' + item.bindCopy + item.label;\r\n  item.children = [\r\n    { type: 'input', label: item.keyText, bind: 'key', required: true },\r\n    { type: 'input', label: item.valueText, bind: 'value', required: true },\r\n  ]\r\n  // 初始化列表数据\r\n  let obj = get(item.bindCopy, {});\r\n  let list = Object.keys(obj).map(key => {\r\n    return { key, value: obj[key] };\r\n  });\r\n  item.defaultValue = list;\r\n  // 数据变更时，将数组形式转化为对象形式\r\n  function onChange(values, key, v) {\r\n    let obj = {};\r\n    _.get(values, item.bind, []).forEach(x => {\r\n      obj[x.key] = x.value;\r\n    });\r\n    _.set(values, item.bindCopy, obj);\r\n    return values;\r\n  }\r\n  item.children.forEach(child => {\r\n    child.onChange = onChange;\r\n  });\r\n  return formArray({ item, layout, values, get });\r\n}\r\n\r\n// 根据索引删除属性 id = orign.ip\r\nfunction delProperty(values, id) {\r\n  let ids = id.split('.');\r\n  if (ids.length === 1) {\r\n    delete values[ids[0]];\r\n  } else {\r\n    let id = ids.splice(0, ids.length - 1).join('.');\r\n    values = _.get(values, id, {});\r\n    delete values[ids[ids.length - 1]];\r\n  }\r\n}\r\n\r\nfunction formOne({ item, layout, values, get }) {\r\n  //生成 radio\r\n  item.bind = '_dynamic.oneof_radio_' + item.label;\r\n  item.onChange = function(newValues, key, value) {\r\n    // 移除未选中类型中的属性\r\n    for (let option of item.children) {\r\n      if (option.label !== value) {\r\n        option.children.forEach(x => {\r\n          delProperty(newValues, x.bind);\r\n        });\r\n      }\r\n    }\r\n    return newValues;\r\n  }\r\n  item.options = item.children.map(x => {\r\n    return { value: x.label, label: x.label };\r\n  });\r\n  // 设置初始选中项\r\n  item.defaultValue = item.children[0].label;\r\n  let list = [];\r\n  for (let option of item.children) {\r\n    let optionChildren = option.children.map(childItem => formNode({ item: childItem, layout, values, get }));\r\n    let controls = (\r\n      <div>\r\n        { get(item.bind) === option.label && \r\n          React.Children.toArray(optionChildren)\r\n        }\r\n      </div>)\r\n    list.push(controls);\r\n  }\r\n  let radio = formBase({ item, layout, values, get });\r\n\r\n  return [radio, list];\r\n}\r\n\r\n// setChange：手动设置values，传入变更后的values\r\nexport function formNode({ item, layout, values, get, defaultItem, setChange, getValues }) {\r\n  item = Object.assign({}, defaultItem, item);\r\n  let type = item.type;\r\n  if (_.indexOf(baseControls, type) >= 0) {\r\n    return formBase({ item, layout, values, get, defaultItem, setChange, getValues })\r\n  } else if (type === 'array') {\r\n    return formArray({ item, layout, values, get, defaultItem, setChange, getValues });\r\n  } else if (type === 'object') {\r\n    return formObject({ item, layout, values, get, defaultItem, setChange, getValues });\r\n  } else if (type === 'oneOf') {\r\n    return formOne({ item, layout, values, get, defaultItem, setChange, getValues });\r\n  } else {\r\n    console.log('DynamicForm: 存在未定义type');\r\n    console.log(item);\r\n  }\r\n}"]}